@inherits LayoutComponentBase
@inject AuthenticationService AuthService
@inject NavigationManager Navigation

<AuthenticationGuard>
    <PageTitle>Migrate to Azure DocumentDB</PageTitle>

    <div class="page">
        <main>
            <div class="top-row px-4 d-flex justify-content-between align-items-center">
                <h2 class="text-left">Migrate to Azure DocumentDB</h2>
                <AuthorizeView>
                    <Authorized>
                        <div class="d-flex align-items-center gap-3">
                            <div class="small">v0.9.5.2</div>
                            <button class="btn btn-sm btn-outline-secondary" @onclick="@(() => Navigation.NavigateTo("/change-password"))">
                                <i class="bi bi-key"></i> Change Password
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" @onclick="HandleLogout">
                                <i class="bi bi-box-arrow-right"></i> Logout
                            </button>
                        </div>
                    </Authorized>
                    <NotAuthorized>
                        <div class="small">v0.9.5.2</div>
                    </NotAuthorized>
                </AuthorizeView>
            </div>

            <article class="content px-4">
                @Body
            </article>
        </main>
    </div>
</AuthenticationGuard>

@code {
    private async Task HandleLogout()
    {
        await AuthService.LogoutAsync();
        Navigation.NavigateTo("/login", true);
    }
}
